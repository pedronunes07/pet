<div class="container">
    <nav class="nav-bar">
      <button class="nav-button" (click)="irParaDashboard()">Dashboard</button>
      <button class="nav-button active">Cadastrar Pet</button>
      <button class="nav-button" (click)="irParaCadastrarDono()">Cadastrar Dono</button>
    </nav>
  
    <div class="form-container">
      <h1>üêæ {{ petId !== undefined ? 'Editar Pet' : 'Cadastrar Pet' }}</h1>
      
      <form (ngSubmit)="salvarPet()" class="pet-form">
        <div class="form-section">
          <h2>Informa√ß√µes do Pet</h2>
          <div class="form-row">
            <div class="form-column">
              <div class="form-group">
                <label for="nome">Nome do Pet</label>
                <input 
                  type="text" 
                  id="nome" 
                  [value]="pet().nome || ''"
                  (input)="atualizarCampo('nome', $any($event.target).value)"
                  name="nome"
                  required
                />
              </div>
  
              <div class="form-group">
                <label for="raca">Ra√ßa</label>
                <input 
                  type="text" 
                  id="raca" 
                  [value]="pet().raca || ''"
                  (input)="atualizarCampo('raca', $any($event.target).value)"
                  name="raca"
                />
              </div>
  
              <div class="form-group-inline">
                <div class="form-group">
                  <label for="peso">Peso</label>
                  <input 
                    type="text" 
                    id="peso" 
                    [value]="pet().peso || ''"
                    (input)="atualizarCampo('peso', $any($event.target).value)"
                    name="peso"
                  />
                </div>
                <div class="form-group">
                  <label for="cor">Cor</label>
                  <input 
                    type="text" 
                    id="cor" 
                    [value]="pet().cor || ''"
                    (input)="atualizarCampo('cor', $any($event.target).value)"
                    name="cor"
                  />
                </div>
              </div>
  
              <div class="form-group">
                <label for="donoId">Dono</label>
                <select 
                  id="donoId" 
                  [value]="pet().donoId || ''"
                  (change)="atualizarDonoId($any($event.target).value)"
                  name="donoId"
                  required
                >
                  <option value="">Selecione um dono</option>
                  @for (dono of donos(); track dono.id) {
                    <option [value]="dono.id">{{ dono.nomeCompleto }}</option>
                  } @empty {
                    <option value="">Nenhum dono cadastrado</option>
                  }
                </select>
              </div>
            </div>
  
            <div class="form-column">
              <div class="form-group">
                <label for="especie">Esp√©cie</label>
                <input 
                  type="text" 
                  id="especie" 
                  [value]="pet().especie || ''"
                  (input)="atualizarCampo('especie', $any($event.target).value)"
                  name="especie"
                  required
                />
              </div>
  
              <div class="form-group">
                <label for="idade">Idade</label>
                <input 
                  type="number" 
                  id="idade" 
                  [value]="pet().idade || 0"
                  (input)="atualizarCampo('idade', +$any($event.target).value)"
                  name="idade"
                />
              </div>
  
              <div class="form-group">
                <label for="sexo">Sexo</label>
                <input 
                  type="text" 
                  id="sexo" 
                  [value]="pet().sexo || ''"
                  (input)="atualizarCampo('sexo', $any($event.target).value)"
                  name="sexo"
                />
              </div>
  
              <div class="form-group">
                <label>Vacinado?</label>
                <div class="checkbox-group">
                  <label class="checkbox-label">
                    <input 
                      type="radio" 
                      name="vacinado" 
                      value="Sim" 
                      [checked]="pet().vacinado === 'Sim'"
                      (change)="atualizarCampo('vacinado', 'Sim')"
                    />
                    Sim
                  </label>
                  <label class="checkbox-label">
                    <input 
                      type="radio" 
                      name="vacinado" 
                      value="N√£o" 
                      [checked]="pet().vacinado === 'N√£o'"
                      (change)="atualizarCampo('vacinado', 'N√£o')"
                    />
                    N√£o
                  </label>
                  <label class="checkbox-label">
                    <input 
                      type="radio" 
                      name="vacinado" 
                      value="Parcialmente" 
                      [checked]="pet().vacinado === 'Parcialmente'"
                      (change)="atualizarCampo('vacinado', 'Parcialmente')"
                    />
                    Parcialmente
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
  
        <div class="form-section">
          <h2>üíâ Vacinas</h2>
          <div class="vaccines-container">
            @for (vacina of pet().vacinas || []; track $index; let i = $index) {
              <div class="vaccine-item">
                <div class="form-row">
                  <div class="form-column">
                    <div class="form-group">
                      <label>Nome da Vacina</label>
                      <input 
                        type="text" 
                        [value]="pet().vacinas?.[i]?.nomeVacina || ''"
                        (input)="atualizarVacina(i, 'nomeVacina', $any($event.target).value)"
                        name="nomeVacina{{i}}"
                      />
                    </div>
                    <div class="form-group">
                      <label>Pr√≥xima Dose</label>
                      <input 
                        type="date" 
                        [value]="pet().vacinas?.[i]?.proximaDose || ''"
                        (input)="atualizarVacina(i, 'proximaDose', $any($event.target).value)"
                        name="proximaDose{{i}}"
                      />
                    </div>
                  </div>
                  <div class="form-column">
                    <div class="form-group">
                      <label>Data da Aplica√ß√£o</label>
                      <input 
                        type="date" 
                        [value]="pet().vacinas?.[i]?.dataAplicacao || ''"
                        (input)="atualizarVacina(i, 'dataAplicacao', $any($event.target).value)"
                        name="dataAplicacao{{i}}"
                      />
                    </div>
                    <div class="form-group">
                      <label>Nome do Veterin√°rio</label>
                      <input 
                        type="text" 
                        [value]="pet().vacinas?.[i]?.nomeVeterinario || ''"
                        (input)="atualizarVacina(i, 'nomeVeterinario', $any($event.target).value)"
                        name="nomeVeterinario{{i}}"
                      />
                    </div>
                  </div>
                </div>
                <button type="button" class="remove-vaccine" (click)="removerVacina(i)">
                  Remover Vacina
                </button>
              </div>
            }
          </div>
          
          <div class="form-actions-inline">
            <button type="button" class="add-button" (click)="adicionarVacina()">
              + Adicionar Vacinas
            </button>
            <button type="button" class="add-button" (click)="adicionarFoto()">
              + Adicionar Fotos
            </button>
          </div>
        </div>
  
        <div class="form-section">
          <div class="form-group">
            <label for="observacoes">Observa√ß√µes</label>
            <textarea 
              id="observacoes" 
              [value]="pet().observacoes || ''"
              (input)="atualizarCampo('observacoes', $any($event.target).value)"
              name="observacoes"
              rows="4"
              placeholder="Observa√ß√µes gerais sobre o pet..."
            ></textarea>
          </div>
  
          <div class="form-group">
            <label for="observacoesMedicas">Observa√ß√µes M√©dicas</label>
            <textarea 
              id="observacoesMedicas" 
              [value]="pet().observacoesMedicas || ''"
              (input)="atualizarCampo('observacoesMedicas', $any($event.target).value)"
              name="observacoesMedicas"
              rows="4"
              placeholder="Observa√ß√µes m√©dicas importantes..."
            ></textarea>
          </div>
        </div>
  
        <div class="form-actions">
          <button type="submit" class="submit-button">{{ petId !== undefined ? 'Atualizar Pet' : 'Cadastrar Pet' }}</button>
        </div>
      </form>
    </div>
  </div>
  
  
  